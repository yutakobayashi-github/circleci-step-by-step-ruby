version: 2.1
jobs:
  ruby-27:
    docker:
      - image: cimg/ruby:2.7-node
    steps:
      - checkout
      - run: ruby --version
      - run: node --version

  ruby-30:
    docker:
      - image: cimg/ruby:3.0-node
    steps:
      - checkout
      - run: ruby --version
      - run: node --version

  ruby-32:
    docker:
      - image: cimg/ruby:3.2-node
    steps:
      - checkout
      - run: ruby --version
      - run: node --version

workflows:
  sequential-job:
    jobs:
      - "ruby-27"
      - "ruby-30":
          requires:
            - "ruby-27"
      - "ruby-32":
          requires:
            - "ruby-30"
  conditional-job:
    jobs:
      - hold: # <<< ジョブの続きを実行するには CircleCI の Web ページ上で手動で承認する必要があります。
          type: approval
      - "ruby-27":
          requires:
            - hold
      - "ruby-30":
          filters:
            branches:
              only: step3-workflows-sequential
          requires:
            - ruby-27
      - "ruby-32":
          filters:
            branches:
              only: master
  sequential-reverse-job:
    jobs: #  <<< ジョブ “ruby-32” → “ruby-30” → “ruby-27” の順でビルドするワークフローを定義してください。
      - "ruby-32"
      - "ruby-30":
          requires:
            - "ruby-32"
      - "ruby-27":
          requires:
            - "ruby-30"
 



